---
description: 話題を視覚的な関係図にまとめる
---

# Visualize コマンド

ユーザーから指定された話題について、要素間の関係性が視覚的にわかるグラフィックレコーディング風の画像を生成します。

**目指すスタイル**: 箇条書きの羅列ではなく、マインドマップ＋フローチャートのハイブリッド。要素が空間的に配置され、矢印や線で関係性が示されている図。

**重要な原則**: 1枚に詰め込みすぎない。情報量が多い場合は複数枚に分割し、各画像で**具体的な内容**まで踏み込む。タイトルだけの薄い図より、詳細がわかる複数枚の図の方が価値がある。

## 入力

$ARGUMENTS

## 手順

### 1. 入力の解析

$ARGUMENTS の内容を解析し、以下のパターンを判別してください：

- **直接指示**: トピックが直接テキストで指定されている場合
- **URL参照**: Webページへの参照がある場合
  - WebFetch で内容を取得
  - **重要**: 「要約して」ではなく「全セクション・全項目を構造化してリストアップして」と指示
- **Issue/PR参照**: GitHub Issue や PR への参照がある場合
  - `gh` コマンドで内容を取得
- **コードベース参照**: コードや設計について説明を求められている場合
  - 必要に応じてコードを探索

### 2. 情報量の評価と分割判断（重要）

収集した情報を評価し、**適切な画像枚数**を決定してください。

#### 判断基準

| 情報の特徴 | 推奨枚数 | 構成 |
|---|---|---|
| 単一トピック、シンプルな構造 | 1枚 | そのまま詳細に |
| 複数セクションがある記事/ドキュメント | 2〜4枚 | 俯瞰図 + セクション別詳細図 |
| 大規模な仕様/長い記事 | 5枚以上 | 俯瞰図 + カテゴリ別詳細図 |

#### 分割時の構成

**1枚目: 全体俯瞰図**
- セクション間の関係性のみを示す
- 「この記事/トピックは何について書かれているか」のナビゲーション
- 各セクションはタイトルレベルでOK（詳細は後続の図で）

**2枚目以降: セクション詳細図**
- 各セクションの**具体的な内容**を深掘り
- ステップ、Tips、例、注意点など実用的な情報を含める
- 1つのセクションが大きければ、さらに分割してもよい

#### 分割の例

```
記事「Claude Code Best Practices」の場合：

1枚目: 全体俯瞰図
  - 設定 / ワークフロー / スケール の3カテゴリと関係性

2枚目: 「設定」詳細
  - CLAUDE.mdに書くべき内容（コマンド、規約、テスト手順...）
  - ツール拡張の具体的な方法（Bash, MCP, スラッシュコマンド）
  - 許可ツール管理の4つの方法

3枚目: 「ワークフロー」詳細
  - 探索→計画→実装→コミットの各ステップで何をするか
  - TDDの具体的な5ステップ
  - ビジュアル反復の流れ

4枚目: 「スケール」詳細
  - ヘッドレスモードのユースケース（CI、Issue分類）
  - 並列実行のパターン（分散レビュー、Worktree）
  - Fan-out / Pipeline の使い分け
```

### 3. 情報の構造分析

**各画像ごとに**、以下の分析を行ってください：

#### a) 要素の抽出
- その画像で扱うトピックの要素を抽出
- **具体的な内容**（ステップ、項目、例）まで含める
- それぞれに短いラベル（2〜5語）をつける

#### b) 関係性の特定

| 関係タイプ | 記号 | 例 |
|---|---|---|
| 包含（AはBを含む） | ○の中に○ | 「環境設定」⊃「CLAUDE.md」 |
| 因果（AがBを引き起こす） | → | 「計画」→「実装」 |
| 双方向（AとBは相互作用） | ↔ | 「テスト」↔「コード」 |
| グループ（A,B,Cは同カテゴリ） | 囲み | ツール群をまとめる |
| 依存（AはBに依存） | 点線→ | 「並列実行」...>「Git Worktrees」 |
| 手順（順番に実行） | 番号付き→ | ①→②→③→④ |

#### c) 中心概念の特定
- その画像の中心に置くべき概念は何か
- 放射状か、フロー型か、階層型か

### 4. 構造マップの作成（テキストで）

**各画像ごとに**、構造をテキストで表現してください：

```
【画像1: 全体俯瞰図】
中心: ○○○
枝1: セクションA → （詳細は画像2で）
枝2: セクションB → （詳細は画像3で）
関係: A → B（Aを設定するとBが使える）

【画像2: セクションA詳細】
中心: セクションA
具体的な内容:
  - 項目1: 説明文（何をするか、なぜ重要か）
  - 項目2: 3つのステップ ①... ②... ③...
  - 項目3: 注意点「○○に気をつける」
関係: 項目1 → 項目2（1を設定してから2を行う）
```

### 5. 画像生成

Nano-Banana-MCP の `generate_image` ツールを使用して、**各画像を順番に**生成してください。

**プロンプト構築の必須要素**:

```
Create a graphic recording / visual note style illustration about [トピック].

STYLE REQUIREMENTS:
- Hand-drawn, sketch-like aesthetic with organic flowing layout
- NOT a rigid grid or bullet-point list
- Elements connected by arrows, lines, and visual flow
- Central concept in the middle, related concepts radiating outward
- Use visual hierarchy: larger = more important
- Include small icons/doodles as visual anchors
- CLEAN SOLID WHITE BACKGROUND - no texture, no paper grain, no stains, no noise, no decorative elements on background
- Japanese text for all labels
- Include SPECIFIC DETAILS, not just topic titles

STRUCTURE:
[ステップ4で作成した構造をここに記述]

DETAILED CONTENT TO INCLUDE:
[具体的なステップ、項目、例、注意点などを列挙]

RELATIONSHIPS TO SHOW:
- [要素A] --arrow--> [要素B] (cause/effect)
- [要素C] <--双方向--> [要素D] (互いに影響)
- Group [要素E, F, G] together in a bubble

COLOR SCHEME:
- 2-3 accent colors maximum
- Use color to distinguish different categories/groups
- Black or dark gray for main text and lines
```

**避けるべきこと**:
- 「infographic」という単語（整然としたレイアウトになりがち）
- 「clean」「organized」「structured」（有機的な配置の逆）
- 番号付きリストの指示
- **タイトルだけで中身がない薄い図**
- **背景のテクスチャ、紙の質感、汚れ、装飾ノイズ**（圧縮効率が悪くなる）

### 6. 結果の提示

生成された画像をすべて提示し、以下を説明：

```
## 生成結果

### 1枚目: 全体俯瞰図
📁 パス: /tmp/...
この図では○○の全体構造を示しています。

### 2枚目: ○○セクション詳細
📁 パス: /tmp/...
この図では○○の具体的な手順とTipsを示しています。

...
```

## 注意事項

- **具体性 > 網羅性**: タイトルだけ並べるより、少ないトピックでも具体的な内容がある方が価値がある
- **1枚に詰め込みすぎない**: 読めない図より、分割された読める図
- **関係性の可視化**: 要素を並べるだけでなく、つながりを示す
- 手書き風・有機的なレイアウトを目指す
- 複数枚生成する場合、俯瞰図で「詳細は画像Nで」と誘導してもよい
