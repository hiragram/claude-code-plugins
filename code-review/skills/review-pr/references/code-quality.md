# ã‚³ãƒ¼ãƒ‰å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹

code-quality-reviewer ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒç¢ºèªã™ã‚‹è¦³ç‚¹ã®è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€‚

## ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡

### 1. å˜ä¸€è²¬ä»»åŸå‰‡ (SRP)

- é–¢æ•°/ãƒ¡ã‚½ãƒƒãƒ‰ãŒ1ã¤ã®è²¬å‹™ã®ã¿ã‚’æŒã£ã¦ã„ã‚‹ã‹
- ã‚¯ãƒ©ã‚¹ãŒ1ã¤ã®ç†ç”±ã§ã®ã¿å¤‰æ›´ã•ã‚Œã‚‹ã‹
- é•·ã™ãã‚‹é–¢æ•°ï¼ˆç›®å®‰: 50è¡Œä»¥ä¸Šï¼‰ãŒãªã„ã‹

**å•é¡Œä¾‹**:
```javascript
// âŒ è¤‡æ•°ã®è²¬å‹™ã‚’æŒã¤é–¢æ•°
function processUserData(user) {
  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  if (!user.email) throw new Error('Email required');
  // å¤‰æ›
  user.email = user.email.toLowerCase();
  // ä¿å­˜
  database.save(user);
  // é€šçŸ¥
  sendWelcomeEmail(user);
}
```

### 2. å‘½åè¦å‰‡

- å¤‰æ•°åãƒ»é–¢æ•°åãŒæ„å›³ã‚’æ˜ç¢ºã«è¡¨ç¾ã—ã¦ã„ã‚‹ã‹
- çœç•¥å½¢ã‚’é¿ã‘ã€èª­ã¿ã‚„ã™ã„åå‰ã«ãªã£ã¦ã„ã‚‹ã‹
- ä¸€è²«ã—ãŸå‘½åè¦å‰‡ã«å¾“ã£ã¦ã„ã‚‹ã‹ï¼ˆcamelCase, snake_caseç­‰ï¼‰

**å•é¡Œä¾‹**:
```javascript
// âŒ æ„å‘³ä¸æ˜ãªåå‰
const d = new Date();
const x = users.filter(u => u.a > 10);

// âœ… æ˜ç¢ºãªåå‰
const currentDate = new Date();
const activeUsers = users.filter(user => user.age > 10);
```

### 3. DRYåŸå‰‡ (Don't Repeat Yourself)

- åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ãŒè¤‡æ•°ç®‡æ‰€ã«å­˜åœ¨ã—ãªã„ã‹
- å…±é€šå‡¦ç†ãŒé©åˆ‡ã«æŠ½å‡ºã•ã‚Œã¦ã„ã‚‹ã‹

**å•é¡Œä¾‹**:
```javascript
// âŒ é‡è¤‡ã‚³ãƒ¼ãƒ‰
function calculateTaxA(amount) {
  return amount * 0.1 + amount * 0.05;
}
function calculateTaxB(amount) {
  return amount * 0.1 + amount * 0.08;
}

// âœ… å…±é€šåŒ–
function calculateTax(amount, additionalRate) {
  return amount * 0.1 + amount * additionalRate;
}
```

### 4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

- ä¾‹å¤–ãŒé©åˆ‡ã«ã‚­ãƒ£ãƒƒãƒãƒ»å‡¦ç†ã•ã‚Œã¦ã„ã‚‹ã‹
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæœ‰ç”¨ãªæƒ…å ±ã‚’å«ã‚“ã§ã„ã‚‹ã‹
- ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ãŒé©åˆ‡ã«ãƒ­ã‚°å‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã‹
- éåŒæœŸå‡¦ç†ã®ã‚¨ãƒ©ãƒ¼ãŒå‡¦ç†ã•ã‚Œã¦ã„ã‚‹ã‹

**å•é¡Œä¾‹**:
```javascript
// âŒ ã‚¨ãƒ©ãƒ¼ã‚’æ¡ã‚Šã¤ã¶ã™
try {
  await fetchData();
} catch (e) {
  // ä½•ã‚‚ã—ãªã„
}

// âœ… é©åˆ‡ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
try {
  await fetchData();
} catch (error) {
  logger.error('Failed to fetch data', { error });
  throw new DataFetchError('Unable to retrieve data', { cause: error });
}
```

### 5. ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§

- ãƒã‚¹ãƒˆãŒæ·±ã™ããªã„ã‹ï¼ˆç›®å®‰: 3æ®µéšä»¥ä¸Šï¼‰
- æ¡ä»¶åˆ†å²ãŒè¤‡é›‘ã™ããªã„ã‹
- ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ãŒä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ã‹
- é©åˆ‡ãªã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚‹ã‹ï¼ˆãŸã ã—éå‰°ãªã‚³ãƒ¡ãƒ³ãƒˆã¯é¿ã‘ã‚‹ï¼‰

**å•é¡Œä¾‹**:
```javascript
// âŒ æ·±ã„ãƒã‚¹ãƒˆã¨ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼
if (user) {
  if (user.age > 18) {
    if (user.status === 1) {
      if (user.balance > 100) {
        processPayment(user);
      }
    }
  }
}

// âœ… æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³ã¨å®šæ•°
const MINIMUM_AGE = 18;
const STATUS_ACTIVE = 1;
const MINIMUM_BALANCE = 100;

if (!user) return;
if (user.age <= MINIMUM_AGE) return;
if (user.status !== STATUS_ACTIVE) return;
if (user.balance <= MINIMUM_BALANCE) return;

processPayment(user);
```

### 6. SOLIDåŸå‰‡

- **S**: å˜ä¸€è²¬ä»»åŸå‰‡ï¼ˆä¸Šè¨˜å‚ç…§ï¼‰
- **O**: é–‹æ”¾é–‰é–åŸå‰‡ - æ‹¡å¼µã«é–‹ã‹ã‚Œã€ä¿®æ­£ã«é–‰ã˜ã¦ã„ã‚‹ã‹
- **L**: ãƒªã‚¹ã‚³ãƒ•ã®ç½®æ›åŸå‰‡ - ã‚µãƒ–ã‚¯ãƒ©ã‚¹ãŒè¦ªã‚¯ãƒ©ã‚¹ã¨ç½®æ›å¯èƒ½ã‹
- **I**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹åˆ†é›¢åŸå‰‡ - ä¸è¦ãªãƒ¡ã‚½ãƒƒãƒ‰ã‚’å¼·åˆ¶ã—ã¦ã„ãªã„ã‹
- **D**: ä¾å­˜æ€§é€†è»¢åŸå‰‡ - æŠ½è±¡ã«ä¾å­˜ã—ã¦ã„ã‚‹ã‹

## æŒ‡æ‘˜ã—ãªã„é …ç›®

ä»¥ä¸‹ã¯ã€Œå¥½ã¿ã®å•é¡Œã€ã¨ã—ã¦æŒ‡æ‘˜ã‚’é¿ã‘ã‚‹:

- ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆãƒªãƒ³ã‚¿ãƒ¼ã§å¯¾å¿œã™ã¹ãï¼‰
- å¼•æ•°ã®é †åºï¼ˆæ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã£ã¦ã„ã‚‹å ´åˆï¼‰
- è»½å¾®ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ©Ÿä¼š
- æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã¸ã®æº–æ‹ ï¼ˆæ–°è¦ã‚³ãƒ¼ãƒ‰ãŒæ—¢å­˜ã«åˆã‚ã›ã¦ã„ã‚‹å ´åˆï¼‰

## ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆä¾‹

```markdown
## ğŸ” ã‚³ãƒ¼ãƒ‰å“è³ª

**å•é¡Œ**: `processOrder` é–¢æ•°ãŒ150è¡Œã‚ã‚Šã€æ³¨æ–‡æ¤œè¨¼ãƒ»åœ¨åº«ç¢ºèªãƒ»æ±ºæ¸ˆå‡¦ç†ãƒ»é€šçŸ¥é€ä¿¡ã®4ã¤ã®è²¬å‹™ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

**å½±éŸ¿**: ä¿å®ˆæ€§ãŒä½ä¸‹ã—ã€ãƒ†ã‚¹ãƒˆãŒå›°é›£ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€1ã¤ã®è²¬å‹™ã®å¤‰æ›´ãŒä»–ã«å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**ææ¡ˆ**: å„è²¬å‹™ã‚’ç‹¬ç«‹ã—ãŸé–¢æ•°ã«åˆ†å‰²ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

```suggestion
// è²¬å‹™ã”ã¨ã«åˆ†å‰²
validateOrder(order);
checkInventory(order.items);
processPayment(order);
sendOrderConfirmation(order);
```

---
_ğŸ¤– Claude Code Review - code-quality-reviewer_
```
